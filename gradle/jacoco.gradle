subprojects {

    apply plugin: 'jacoco'
    apply plugin: 'jacoco-report-aggregation'


    jacocoTestReport {
        reports {
            html.required.set(true)
        }
        finalizedBy jacocoTestCoverageVerification

        afterEvaluate {
            classDirectories.setFrom(files(classDirectories.files.collect {
                fileTree(dir: it, exclude: [
                        "com.pawith.**.entity.Q*.*",
                        "com.pawith.**.dto.**"
                ])
            }))
        }
    }

    jacocoTestCoverageVerification {
        violationRules {
            rule {
                limit {
                    minimum = 0.0
                }
            }
        }
        finalizedBy testCodeCoverageReport
    }

    jacoco{
        toolVersion = "0.8.7"
    }

}

project(":Api-Module"){
    apply plugin: 'jacoco'
    apply plugin: 'jacoco-report-aggregation'
}